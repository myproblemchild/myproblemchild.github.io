<script>
    function drawSemicircles(svgId, angles) {
        const svg = document.getElementById(svgId);
        svg.innerHTML = "";

        const cx = 0;
        const cy = 0;
        const r = 0.8;

        // Create mask
        const mask = document.createElementNS("http://www.w3.org/2000/svg", "mask");
        mask.setAttribute("id", "mask1");

        // White rectangle to start with fully visible mask
        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute("x", -1);
        rect.setAttribute("y", -1);
        rect.setAttribute("width", 2);
        rect.setAttribute("height", 2);
        rect.setAttribute("fill", "white");
        mask.appendChild(rect);

        svg.appendChild(mask);

        // Green circle with mask applied
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", cx);
        circle.setAttribute("cy", cy);
        circle.setAttribute("r", r);
        circle.setAttribute("fill", "lime");
        circle.setAttribute("stroke", "black");
        circle.setAttribute("stroke-width", "0.01");
        circle.setAttribute("mask", "url(#mask1)");
        svg.appendChild(circle);

        angles.forEach(theta => {
            const x1 = cx + r * Math.cos(theta);
            const y1 = cy + r * Math.sin(theta);
            const x2 = cx + r * Math.cos(theta + Math.PI);
            const y2 = cy + r * Math.sin(theta + Math.PI);

            const largeArc = 0;
            const sweep = 0;

            const pathData = [
                `M ${cx} ${cy}`,
                `L ${x1} ${y1}`,
                `A ${r} ${r} 0 ${largeArc} ${sweep} ${x2} ${y2}`,
                `Z`
            ].join(" ");

            // Create gray visible semicircle
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            path.setAttribute("d", pathData);
            path.setAttribute("fill", "rgba(0,0,0,0.4)");
            path.setAttribute("stroke", "black");
            path.setAttribute("stroke-width", "0.01");
            svg.appendChild(path);

            // Create black shape in mask
            const maskPath = document.createElementNS("http://www.w3.org/2000/svg", "path");
            maskPath.setAttribute("d", pathData);
            maskPath.setAttribute("fill", "black");
            mask.appendChild(maskPath);
        });
    }


    function fullDiskCovered(angles) {
        if (angles.length < 3) {
            return false;
        }
        angles = angles.concat(angles[0] + 2 * Math.PI);
        for (var i = 1; i < angles.length; i++) {
            if (angles[i] - angles[i - 1] > Math.PI) {
                return false;
            }
        }
        return true;
    }

    function main() {
        const slider = document.getElementById("slider");
        const nValue = document.getElementById("nValue");

        function update() {
            const N = Number(slider.value);
            nValue.textContent = N;

            // Generate N random angles in [0, 2Ï€)
            const angles = Array.from({ length: N }, () => Math.random() * 2 * Math.PI);
            angles.sort();
            drawSemicircles('example', angles);

            // Format and display angles
            var output = angles.map(a => a.toFixed(4));
            output.push(`Full disk covered? ${fullDiskCovered(angles) ? "Yes" : "No"}`);
            anglesOutput.textContent = output.join("\n");
        }

        slider.addEventListener("input", update);

        update();
    }
</script>

<body onload="main()">
    <svg id="example" width="600" height="600" viewBox="-1 -1 2 2"></svg>

    <div>
        <label>
            N:
            <input type="range" id="slider" min="0" max="10" value="2" />
            <span id="nValue">0</span>
        </label>
    </div>

    <div id="anglesOutput" style="white-space: pre; font-family: monospace;"></div>

</body>